

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>pygmin.storage.Database &mdash; pygmin 0.1 documentation</title>
    
    <link rel="stylesheet" href="../_static/scipy.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../',
        VERSION:     '0.1',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <link rel="top" title="pygmin 0.1 documentation" href="../index.html" />
    <link rel="up" title="Database storage" href="../database.html" />
    <link rel="next" title="pygmin.storage.Database.engine" href="pygmin.storage.Database.engine.html" />
    <link rel="prev" title="pygmin.storage.Distance" href="pygmin.storage.Distance.html" /> 
  </head>
  <body>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="../py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="../np-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="pygmin.storage.Database.engine.html" title="pygmin.storage.Database.engine"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="pygmin.storage.Distance.html" title="pygmin.storage.Distance"
             accesskey="P">previous</a> |</li>
        <li><a href="../index.html">pygmin 0.1 documentation</a> &raquo;</li>
          <li><a href="../database.html" accesskey="U">Database storage</a> &raquo;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body">
            
  <div class="section" id="pygmin-storage-database">
<h1>pygmin.storage.Database<a class="headerlink" href="#pygmin-storage-database" title="Permalink to this headline">¶</a></h1>
<dl class="class">
<dt id="pygmin.storage.Database">
<em class="property">class </em><tt class="descclassname">pygmin.storage.</tt><tt class="descname">Database</tt><big>(</big><em>db=':memory:'</em>, <em>accuracy=0.001</em>, <em>connect_string='sqlite:///%s'</em>, <em>onMinimumAdded=None</em>, <em>onMinimumRemoved=None</em>, <em>compareMinima=None</em><big>)</big><a class="reference internal" href="../_modules/pygmin/storage/database.html#Database"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pygmin.storage.Database" title="Permalink to this definition">¶</a></dt>
<dd><p>Database storage class</p>
<p>The Database class handles the connection to the database. It has functions to create new Minima,
TransitionState and Distance objects. The objects are persistent in the database and exist as
soon as the Database class in connected to the database. If any value in the objects is changed,
the changes are automatically persistent in the database (TODO: be careful, check commit transactions, ...)</p>
<p>Database uses SQLAlchemy to connect to the database. Check the web page for available connectors. Unless
you know better, the standard sqlite should be used. The database can be generated in memory (default) or
written to a file if db is specified when creating the class.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters :</th><td class="field-body"><p class="first"><strong>db</strong> : string, optional</p>
<blockquote>
<div><p>filename of new or existing database to connect to.  default creates
new database in memory.</p>
</div></blockquote>
<p><strong>accuracy</strong> : float, optional</p>
<blockquote>
<div><p>energy tolerance to count minima as equal</p>
</div></blockquote>
<p><strong>connect_string</strong> : string, optional</p>
<blockquote>
<div><p>connection string, default is sqlite database</p>
</div></blockquote>
<p><strong>compareMinima</strong> : callable, <cite>bool = compareMinima(min1, min2)</cite>, optional</p>
<blockquote>
<div><p>called to determine if two minima are identical.  Only called
if the energies are within <cite>accuracy</cite> of each other.</p>
</div></blockquote>
<p><strong>onMinimumAdded</strong> : callable, <cite>onMinimumAdded(minimum)</cite>, optional</p>
<blockquote>
<div><p>called when a new, unique, minimum is added to the database</p>
</div></blockquote>
<p><strong>onMinimumRemoved</strong> : callable, <cite>onMinimumRemoved(minimum)</cite>, optional</p>
<blockquote class="last">
<div><p>called when a minimum is removed from the database</p>
</div></blockquote>
</td>
</tr>
</tbody>
</table>
<div class="admonition-see-also admonition seealso">
<p class="first admonition-title">See also</p>
<p class="last"><a class="reference internal" href="pygmin.storage.Minimum.html#pygmin.storage.Minimum" title="pygmin.storage.Minimum"><tt class="xref py py-obj docutils literal"><span class="pre">Minimum</span></tt></a>, <a class="reference internal" href="pygmin.storage.TransitionState.html#pygmin.storage.TransitionState" title="pygmin.storage.TransitionState"><tt class="xref py py-obj docutils literal"><span class="pre">TransitionState</span></tt></a>, <a class="reference internal" href="pygmin.storage.Distance.html#pygmin.storage.Distance" title="pygmin.storage.Distance"><tt class="xref py py-obj docutils literal"><span class="pre">Distance</span></tt></a></p>
</div>
<p class="rubric">Examples</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">pygmin.storage</span> <span class="kn">import</span> <span class="n">Database</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">db</span> <span class="o">=</span> <span class="n">Database</span><span class="p">(</span><span class="n">db</span><span class="o">=</span><span class="s">&quot;test.db&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">for</span> <span class="n">energy</span> <span class="ow">in</span> <span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">random</span><span class="p">(</span><span class="mi">10</span><span class="p">):</span>
<span class="gp">&gt;&gt;&gt; </span>    <span class="n">a</span><span class="o">.</span><span class="n">addMinimum</span><span class="p">(</span><span class="n">energy</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">random</span><span class="p">(</span><span class="mi">10</span><span class="p">))</span>
<span class="go">&gt;&gt;&gt;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">for</span> <span class="n">minimum</span> <span class="ow">in</span> <span class="n">database</span><span class="o">.</span><span class="n">minima</span><span class="p">():</span>
<span class="gp">&gt;&gt;&gt; </span>    <span class="k">print</span> <span class="n">minimum</span><span class="o">.</span><span class="n">energy</span>
</pre></div>
</div>
<p class="rubric">Attributes</p>
<table border="1" class="longtable docutils">
<colgroup>
<col width="10%" />
<col width="90%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td><a class="reference internal" href="pygmin.storage.Database.engine.html#pygmin.storage.Database.engine" title="pygmin.storage.Database.engine"><tt class="xref py py-obj docutils literal"><span class="pre">engine</span></tt></a></td>
<td></td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="pygmin.storage.Database.session.html#pygmin.storage.Database.session" title="pygmin.storage.Database.session"><tt class="xref py py-obj docutils literal"><span class="pre">session</span></tt></a></td>
<td></td>
</tr>
<tr class="row-odd"><td><a class="reference internal" href="pygmin.storage.Database.accuracy.html#pygmin.storage.Database.accuracy" title="pygmin.storage.Database.accuracy"><tt class="xref py py-obj docutils literal"><span class="pre">accuracy</span></tt></a></td>
<td>float(x) -&gt; floating point number</td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="pygmin.storage.Database.onMinimumRemoved.html#pygmin.storage.Database.onMinimumRemoved" title="pygmin.storage.Database.onMinimumRemoved"><tt class="xref py py-obj docutils literal"><span class="pre">onMinimumRemoved</span></tt></a></td>
<td></td>
</tr>
<tr class="row-odd"><td><a class="reference internal" href="pygmin.storage.Database.onMinimumAdded.html#pygmin.storage.Database.onMinimumAdded" title="pygmin.storage.Database.onMinimumAdded"><tt class="xref py py-obj docutils literal"><span class="pre">onMinimumAdded</span></tt></a></td>
<td></td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="pygmin.storage.Database.compareMinima.html#pygmin.storage.Database.compareMinima" title="pygmin.storage.Database.compareMinima"><tt class="xref py py-obj docutils literal"><span class="pre">compareMinima</span></tt></a></td>
<td></td>
</tr>
</tbody>
</table>
<p class="rubric">Methods</p>
<table border="1" class="longtable docutils">
<colgroup>
<col width="10%" />
<col width="90%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td><a class="reference internal" href="pygmin.storage.Database.addMinimum.html#pygmin.storage.Database.addMinimum" title="pygmin.storage.Database.addMinimum"><tt class="xref py py-obj docutils literal"><span class="pre">addMinimum</span></tt></a>(E,&nbsp;coords[,&nbsp;commit])</td>
<td>add a new minimum to database</td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="pygmin.storage.Database.addTransitionState.html#pygmin.storage.Database.addTransitionState" title="pygmin.storage.Database.addTransitionState"><tt class="xref py py-obj docutils literal"><span class="pre">addTransitionState</span></tt></a>(energy,&nbsp;coords,&nbsp;min1,&nbsp;min2)</td>
<td>Add transition state object</td>
</tr>
<tr class="row-odd"><td><a class="reference internal" href="pygmin.storage.Database.distances.html#pygmin.storage.Database.distances" title="pygmin.storage.Database.distances"><tt class="xref py py-obj docutils literal"><span class="pre">distances</span></tt></a>()</td>
<td>return an iterator over all distances in database</td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="pygmin.storage.Database.getDistance.html#pygmin.storage.Database.getDistance" title="pygmin.storage.Database.getDistance"><tt class="xref py py-obj docutils literal"><span class="pre">getDistance</span></tt></a>(min1,&nbsp;min2)</td>
<td>return the distance between two minima</td>
</tr>
<tr class="row-odd"><td><a class="reference internal" href="pygmin.storage.Database.getDistanceORM.html#pygmin.storage.Database.getDistanceORM" title="pygmin.storage.Database.getDistanceORM"><tt class="xref py py-obj docutils literal"><span class="pre">getDistanceORM</span></tt></a>(min1,&nbsp;min2)</td>
<td>slow way of getting distance.  deprecated</td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="pygmin.storage.Database.getMinimum.html#pygmin.storage.Database.getMinimum" title="pygmin.storage.Database.getMinimum"><tt class="xref py py-obj docutils literal"><span class="pre">getMinimum</span></tt></a>(id)</td>
<td>return the minimum with a given id</td>
</tr>
<tr class="row-odd"><td><a class="reference internal" href="pygmin.storage.Database.getTransitionState.html#pygmin.storage.Database.getTransitionState" title="pygmin.storage.Database.getTransitionState"><tt class="xref py py-obj docutils literal"><span class="pre">getTransitionState</span></tt></a>(min1,&nbsp;min2)</td>
<td>return the TransitionState between two minima</td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="pygmin.storage.Database.mergeMinima.html#pygmin.storage.Database.mergeMinima" title="pygmin.storage.Database.mergeMinima"><tt class="xref py py-obj docutils literal"><span class="pre">mergeMinima</span></tt></a>(min1,&nbsp;min2)</td>
<td>merge two minima in the database</td>
</tr>
<tr class="row-odd"><td><a class="reference internal" href="pygmin.storage.Database.minima.html#pygmin.storage.Database.minima" title="pygmin.storage.Database.minima"><tt class="xref py py-obj docutils literal"><span class="pre">minima</span></tt></a>([order_energy])</td>
<td>return an iterator over all minima in database</td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="pygmin.storage.Database.minimum_adder.html#pygmin.storage.Database.minimum_adder" title="pygmin.storage.Database.minimum_adder"><tt class="xref py py-obj docutils literal"><span class="pre">minimum_adder</span></tt></a>([Ecut])</td>
<td>wrapper class to add minima</td>
</tr>
<tr class="row-odd"><td><a class="reference internal" href="pygmin.storage.Database.removeMinimum.html#pygmin.storage.Database.removeMinimum" title="pygmin.storage.Database.removeMinimum"><tt class="xref py py-obj docutils literal"><span class="pre">removeMinimum</span></tt></a>(m)</td>
<td>remove a minimum from the database</td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="pygmin.storage.Database.setDistance.html#pygmin.storage.Database.setDistance" title="pygmin.storage.Database.setDistance"><tt class="xref py py-obj docutils literal"><span class="pre">setDistance</span></tt></a>(dist,&nbsp;min1,&nbsp;min2)</td>
<td>set the distance between two minima</td>
</tr>
<tr class="row-odd"><td><a class="reference internal" href="pygmin.storage.Database.setDistanceBulk.html#pygmin.storage.Database.setDistanceBulk" title="pygmin.storage.Database.setDistanceBulk"><tt class="xref py py-obj docutils literal"><span class="pre">setDistanceBulk</span></tt></a>(values)</td>
<td>set multiple distances</td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="pygmin.storage.Database.transition_states.html#pygmin.storage.Database.transition_states" title="pygmin.storage.Database.transition_states"><tt class="xref py py-obj docutils literal"><span class="pre">transition_states</span></tt></a>()</td>
<td>return an iterator over all transition states in database</td>
</tr>
</tbody>
</table>
</dd></dl>

</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar">
        <div class="sphinxsidebarwrapper">
  <h4>Previous topic</h4>
  <p class="topless"><a href="pygmin.storage.Distance.html"
                        title="previous chapter">pygmin.storage.Distance</a></p>
  <h4>Next topic</h4>
  <p class="topless"><a href="pygmin.storage.Database.engine.html"
                        title="next chapter">pygmin.storage.Database.engine</a></p>
  <h3>This Page</h3>
  <ul class="this-page-menu">
    <li><a href="../_sources/generated/pygmin.storage.Database.txt"
           rel="nofollow">Show Source</a></li>
  </ul>
<div id="searchbox" style="display: none">
  <h3>Quick search</h3>
    <form class="search" action="../search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    Enter search terms or a module, class or function name.
    </p>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="../py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="../np-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="pygmin.storage.Database.engine.html" title="pygmin.storage.Database.engine"
             >next</a> |</li>
        <li class="right" >
          <a href="pygmin.storage.Distance.html" title="pygmin.storage.Distance"
             >previous</a> |</li>
        <li><a href="../index.html">pygmin 0.1 documentation</a> &raquo;</li>
          <li><a href="../database.html" >Database storage</a> &raquo;</li> 
      </ul>
    </div>
    <div class="footer">
        &copy; Copyright 2012, Victor Rühle, Jacob Stevenson.
      Created using <a href="http://sphinx.pocoo.org/">Sphinx</a> 1.1.3.
    </div>
  </body>
</html>